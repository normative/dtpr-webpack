<iframe id="<%= id %>"></iframe>
<script>
  const frame = document.getElementById("<%= id %>");
  <%
  const chatConfig = {
    agentId: "f92d33ee-bfa0-4c27-9a5d-852381c861c2", // this is the dialog-flow id for the specific agent which should handle the requests
    // startingIntent: "learn-about-component", // the intent that the conversation will start on - also persisted under the originalIntent
    placeId: "recHJJkuqk0AYjHa9", // the place that the system or component is in - id corresponds to DTPR Airtable place id
    componentId: "recT9MVNlQBhjSBSE", // Airtable 'components' id of the mirror computer vision system
  };
  %>
  frame.srcdoc = `
    <div id="chat-client">
      <!-- injected configured chat client -->
      <h1>Hello World!!</h1>
    </div>
    <style>
      df-messenger {
      --df-messenger-button-titlebar-font-color:#333333;
      --df-messenger-bot-message: #FAFAFA;
      --df-messenger-button-titlebar-color: #ffffff;
      --df-messenger-chat-background-color: #fafafa;
      --df-messenger-font-color: #000000;
      --df-messenger-send-icon: #000000;
      --df-messenger-user-message: #bae6ed;
      }
    </style>
  `;
  const script = frame.contentWindow.document.createElement("script");
  script.src = "https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"
  frame.contentWindow.document.getElementById("chat-client").innerHTML = `<df-messenger
    user-id="${JSON.stringify(chatConfig)}"
    intent="WELCOME"
    chat-title="Learn About the Computer Vision Mirror"
    agent-id="${chatConfig.agentId}"
    chat-icon="https://helpfulplaces.com/dtpr_prototype/icon.png"
    language-code="en">
  </df-messenger>`;
</script>